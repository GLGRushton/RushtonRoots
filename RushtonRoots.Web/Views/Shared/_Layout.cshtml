<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Rushton Roots</title>
    
    @* Standard Meta Tags *@
    <meta name="description" content="@(ViewData["Description"] ?? "RushtonRoots - Preserve your family history and connect with your heritage")" />
    <meta name="author" content="RushtonRoots" />
    
    @* Open Graph Meta Tags (Facebook, LinkedIn) *@
    <meta property="og:title" content="@(ViewData["OgTitle"] ?? ViewData["Title"] ?? "RushtonRoots")" />
    <meta property="og:description" content="@(ViewData["OgDescription"] ?? ViewData["Description"] ?? "RushtonRoots - Preserve your family history and connect with your heritage")" />
    <meta property="og:type" content="@(ViewData["OgType"] ?? "website")" />
    <meta property="og:url" content="@(ViewData["OgUrl"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}")" />
    <meta property="og:image" content="@(ViewData["OgImage"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}/assets/images/rushton-roots-og-image.jpg")" />
    <meta property="og:site_name" content="RushtonRoots" />
    
    @* Twitter Card Meta Tags *@
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="@(ViewData["TwitterTitle"] ?? ViewData["OgTitle"] ?? ViewData["Title"] ?? "RushtonRoots")" />
    <meta name="twitter:description" content="@(ViewData["TwitterDescription"] ?? ViewData["OgDescription"] ?? ViewData["Description"] ?? "RushtonRoots - Preserve your family history and connect with your heritage")" />
    <meta name="twitter:image" content="@(ViewData["TwitterImage"] ?? ViewData["OgImage"] ?? $"{Context.Request.Scheme}://{Context.Request.Host}/assets/images/rushton-roots-og-image.jpg")" />
    
    @* Additional Meta Tags for Specific Content Types *@
    @if (ViewData["OgType"]?.ToString() == "article")
    {
        <meta property="article:author" content="@ViewData["ArticleAuthor"]" />
        <meta property="article:published_time" content="@ViewData["ArticlePublishedTime"]" />
        <meta property="article:section" content="@ViewData["ArticleSection"]" />
    }
    
    @if (ViewData["OgType"]?.ToString() == "profile")
    {
        <meta property="profile:first_name" content="@ViewData["ProfileFirstName"]" />
        <meta property="profile:last_name" content="@ViewData["ProfileLastName"]" />
    }
    
    <link rel="stylesheet" href="~/dist/styles.css" />
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #e8f5e9, #f1f8e9);
            min-height: 100vh;
        }
    </style>
    @await RenderSectionAsync("Styles", required: false)

</head>
<body>
    @* Angular Layout Wrapper Component - Phase 11.1 
        Orchestrates: HeaderComponent, NavigationComponent, BreadcrumbComponent, FooterComponent
    *@
    <app-layout-wrapper
        userinfo='@Html.Raw(Json.Serialize(new {
            name = User.Identity?.Name ?? "",
            role = User.IsInRole("Admin") ? "System Admin" : User.IsInRole("HouseholdAdmin") ? "Household Admin" : "Family Member",
            isAuthenticated = User.Identity?.IsAuthenticated ?? false,
            isAdmin = User.IsInRole("Admin"),
            isHouseholdAdmin = User.IsInRole("HouseholdAdmin")
        }))'
        breadcrumbitems='@Html.Raw(Json.Serialize(ViewData["Breadcrumbs"] ?? new object[] { }))'
        showsearch="true"
        shownotifications="true"
        showbreadcrumbs="@((ViewData["ShowBreadcrumbs"] as bool?) ?? false)">
        
        @RenderBody()
        
    </app-layout-wrapper>

    @* Hidden logout form for server-side authentication *@
    <form asp-controller="Account" asp-action="Logout" method="post" style="display: none;" id="logoutForm">
    </form>
    
    @* Angular Elements Scripts *@
    <script src="~/dist/runtime.js"></script>
    <script src="~/dist/polyfills.js"></script>
    <script src="~/dist/main.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
