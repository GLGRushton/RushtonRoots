<div class="forgot-password-container">
  <mat-card class="forgot-password-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon class="forgot-icon">lock_reset</mat-icon>
        <h2>Forgot Password?</h2>
      </mat-card-title>
      <mat-card-subtitle>
        Enter your email address and we'll send you a link to reset your password.
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <!-- Success message display -->
      <div class="success-alert" *ngIf="successMessage">
        <mat-icon>check_circle</mat-icon>
        <span>{{ successMessage }}</span>
      </div>

      <!-- Error message display -->
      <div class="error-alert" *ngIf="errorMessage">
        <mat-icon>error_outline</mat-icon>
        <span>{{ errorMessage }}</span>
      </div>

      <!-- Forgot password form -->
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" *ngIf="!authState.success">
        <!-- Email field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input 
            matInput 
            type="email" 
            formControlName="email"
            placeholder="your@email.com"
            autocomplete="email">
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="hasError()">
            {{ getErrorMessage() }}
          </mat-error>
        </mat-form-field>

        <!-- Submit button -->
        <button 
          mat-raised-button 
          color="primary" 
          type="submit"
          class="submit-button full-width"
          [disabled]="authState.loading">
          <mat-spinner 
            *ngIf="authState.loading" 
            diameter="20" 
            class="button-spinner">
          </mat-spinner>
          <span *ngIf="!authState.loading">Send Reset Link</span>
          <span *ngIf="authState.loading">Sending...</span>
        </button>
      </form>

      <!-- Success state -->
      <div class="success-state" *ngIf="authState.success">
        <mat-icon class="success-icon">mark_email_read</mat-icon>
        <h3>Check Your Email</h3>
        <p>We've sent a password reset link to your email address. Please check your inbox and follow the instructions.</p>
        <p class="note">Didn't receive the email? Check your spam folder or try again.</p>
      </div>

      <!-- Back to login link -->
      <div class="back-to-login">
        <a routerLink="/Account/Login" class="back-link">
          <mat-icon>arrow_back</mat-icon>
          <span>Back to Login</span>
        </a>
      </div>
    </mat-card-content>
  </mat-card>
</div>
