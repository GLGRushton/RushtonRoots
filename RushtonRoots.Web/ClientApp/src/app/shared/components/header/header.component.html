<mat-toolbar class="app-header" color="primary">
  <div class="header-container">
    <!-- Logo and Title -->
    <div class="logo-section">
      <button 
        mat-icon-button 
        class="menu-button" 
        (click)="toggleMobileMenu()"
        aria-label="Toggle navigation menu">
        <mat-icon>menu</mat-icon>
      </button>
      
      <h1 class="site-title">
        <a (click)="navigateTo('/')" class="title-link">
          <span class="leaf-icon">ðŸŒ³</span>
          <span class="title-text">Rushton Roots</span>
        </a>
      </h1>
    </div>

    <!-- Navigation Links (Desktop) -->
    <app-navigation 
      *ngIf="userInfo.isAuthenticated"
      [isAuthenticated]="userInfo.isAuthenticated"
      [isMobile]="false"
      class="desktop-nav">
    </app-navigation>

    <!-- Right Section: Search, Notifications, User Menu -->
    <div class="actions-section">
      <!-- Global Search -->
      <div class="search-container" *ngIf="showSearch && userInfo.isAuthenticated">
        <mat-form-field appearance="outline" class="search-field">
          <mat-icon matPrefix>search</mat-icon>
          <input 
            matInput 
            placeholder="Search..." 
            (keyup.enter)="onSearch(($any($event.target)).value)"
            aria-label="Global search">
        </mat-form-field>
      </div>

      <!-- Notification Bell -->
      <button 
        mat-icon-button 
        *ngIf="showNotifications && userInfo.isAuthenticated"
        aria-label="Notifications"
        class="notification-button">
        <mat-icon [matBadge]="0" matBadgeColor="warn" [matBadgeHidden]="true">notifications</mat-icon>
      </button>

      <!-- User Menu -->
      <app-user-menu 
        *ngIf="userInfo.isAuthenticated"
        [userInfo]="userInfo"
        (logout)="onLogout()">
      </app-user-menu>

      <!-- Login Link (when not authenticated) -->
      <a 
        *ngIf="!userInfo.isAuthenticated" 
        (click)="navigateTo('/Account/Login')"
        class="login-link"
        mat-raised-button>
        Login
      </a>
    </div>
  </div>

  <!-- Mobile Navigation (Collapsible) -->
  <div class="mobile-nav" *ngIf="isMobileMenuOpen && userInfo.isAuthenticated">
    <app-navigation 
      [isAuthenticated]="userInfo.isAuthenticated"
      [isMobile]="true">
    </app-navigation>
  </div>
</mat-toolbar>
