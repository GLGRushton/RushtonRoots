<div class="household-settings-container">
  <!-- Privacy Settings Section -->
  <mat-card class="settings-section">
    <mat-card-header>
      <mat-card-title>
        <mat-icon class="section-icon">{{ getPrivacyOption(settings.privacy).icon }}</mat-icon>
        Privacy Settings
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-radio-group [(ngModel)]="settings.privacy" 
                       (change)="onSettingChange()"
                       [disabled]="!canEdit"
                       class="privacy-radio-group">
        <mat-radio-button *ngFor="let option of privacyOptions" 
                          [value]="option.value"
                          class="privacy-option">
          <div class="option-content">
            <div class="option-header">
              <mat-icon>{{ option.icon }}</mat-icon>
              <strong>{{ option.label }}</strong>
            </div>
            <p class="option-description">{{ option.description }}</p>
          </div>
        </mat-radio-button>
      </mat-radio-group>
    </mat-card-content>
  </mat-card>

  <!-- Member Permissions Section -->
  <mat-card class="settings-section">
    <mat-card-header>
      <mat-card-title>
        <mat-icon class="section-icon">people</mat-icon>
        Member Permissions
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="settings-list">
        <div class="setting-item">
          <div class="setting-info">
            <mat-icon class="setting-icon">person_add</mat-icon>
            <div>
              <div class="setting-label">Allow Member Invites</div>
              <div class="setting-description">Members can invite other people to join this household</div>
            </div>
          </div>
          <mat-slide-toggle [(ngModel)]="settings.allowMemberInvites"
                           (change)="onSettingChange()"
                           [disabled]="!canEdit"
                           color="primary">
          </mat-slide-toggle>
        </div>

        <mat-divider></mat-divider>

        <div class="setting-item">
          <div class="setting-info">
            <mat-icon class="setting-icon">approval</mat-icon>
            <div>
              <div class="setting-label">Require Approval for New Members</div>
              <div class="setting-description">Admin must approve new member requests</div>
            </div>
          </div>
          <mat-slide-toggle [(ngModel)]="settings.requireApprovalForNewMembers"
                           (change)="onSettingChange()"
                           [disabled]="!canEdit"
                           color="primary">
          </mat-slide-toggle>
        </div>

        <mat-divider></mat-divider>

        <div class="setting-item">
          <div class="setting-info">
            <mat-icon class="setting-icon">photo_library</mat-icon>
            <div>
              <div class="setting-label">Allow Member Photos</div>
              <div class="setting-description">Members can upload photos to the household</div>
            </div>
          </div>
          <mat-slide-toggle [(ngModel)]="settings.allowMemberPhotos"
                           (change)="onSettingChange()"
                           [disabled]="!canEdit"
                           color="primary">
          </mat-slide-toggle>
        </div>

        <mat-divider></mat-divider>

        <div class="setting-item">
          <div class="setting-info">
            <mat-icon class="setting-icon">edit</mat-icon>
            <div>
              <div class="setting-label">Allow Member Edits</div>
              <div class="setting-description">Members can edit household information</div>
            </div>
          </div>
          <mat-slide-toggle [(ngModel)]="settings.allowMemberEdits"
                           (change)="onSettingChange()"
                           [disabled]="!canEdit"
                           color="primary">
          </mat-slide-toggle>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Notification Settings Section -->
  <mat-card class="settings-section">
    <mat-card-header>
      <mat-card-title>
        <mat-icon class="section-icon">notifications</mat-icon>
        Notification Settings
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="settings-list">
        <div class="setting-item">
          <div class="setting-info">
            <mat-icon class="setting-icon">person_add</mat-icon>
            <div>
              <div class="setting-label">Notify on New Members</div>
              <div class="setting-description">Receive notifications when someone joins the household</div>
            </div>
          </div>
          <mat-slide-toggle [(ngModel)]="settings.notifyOnNewMembers"
                           (change)="onSettingChange()"
                           [disabled]="!canEdit"
                           color="primary">
          </mat-slide-toggle>
        </div>

        <mat-divider></mat-divider>

        <div class="setting-item">
          <div class="setting-info">
            <mat-icon class="setting-icon">edit_note</mat-icon>
            <div>
              <div class="setting-label">Notify on Edits</div>
              <div class="setting-description">Receive notifications when household information is edited</div>
            </div>
          </div>
          <mat-slide-toggle [(ngModel)]="settings.notifyOnEdits"
                           (change)="onSettingChange()"
                           [disabled]="!canEdit"
                           color="primary">
          </mat-slide-toggle>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Action Buttons -->
  <div class="settings-actions" *ngIf="canEdit">
    <button mat-raised-button 
            color="primary" 
            (click)="onSave()"
            [disabled]="!hasUnsavedChanges">
      <mat-icon>save</mat-icon>
      Save Settings
    </button>
    <button mat-button 
            (click)="onReset()"
            [disabled]="!hasUnsavedChanges">
      Reset
    </button>
  </div>

  <!-- Read-only notice -->
  <div class="readonly-notice" *ngIf="!canEdit">
    <mat-icon>info</mat-icon>
    <span>You don't have permission to modify these settings.</span>
  </div>
</div>
