<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phase 9.1 Mobile Features Demo</title>
  <style>
    body {
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(to bottom, #e8f5e9, #f1f8e9);
    }
    
    h1 {
      color: #2e7d32;
      border-bottom: 3px solid #2e7d32;
      padding-bottom: 10px;
    }
    
    h2 {
      color: #1b5e20;
      margin-top: 40px;
    }
    
    .feature-section {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .code-block {
      background: #f5f5f5;
      border-left: 4px solid #2e7d32;
      padding: 16px;
      margin: 16px 0;
      border-radius: 4px;
      overflow-x: auto;
    }
    
    pre {
      margin: 0;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    
    code {
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    
    .feature-list {
      list-style-type: none;
      padding: 0;
    }
    
    .feature-list li {
      padding: 8px 0;
      padding-left: 24px;
      position: relative;
    }
    
    .feature-list li:before {
      content: "‚úì";
      color: #4caf50;
      font-weight: bold;
      position: absolute;
      left: 0;
    }
    
    .mobile-screen {
      max-width: 375px;
      margin: 20px auto;
      padding: 16px;
      background: white;
      border: 2px solid #2e7d32;
      border-radius: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .touch-target {
      display: inline-block;
      min-width: 44px;
      min-height: 44px;
      padding: 8px;
      background: #2e7d32;
      color: white;
      border-radius: 8px;
      text-align: center;
      line-height: 28px;
      margin: 4px;
    }
    
    .warning {
      background: #fff3e0;
      border-left: 4px solid #ff9800;
      padding: 12px;
      margin: 16px 0;
      border-radius: 4px;
    }
    
    .success {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
      padding: 12px;
      margin: 16px 0;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>üöÄ Phase 9.1: Mobile-First Components - Demo & Usage Guide</h1>
  
  <div class="success">
    <strong>‚úÖ Phase 9.1 Complete!</strong> All mobile-first components and utilities have been implemented and are ready to use.
  </div>
  
  <!-- Mobile Service -->
  <div class="feature-section">
    <h2>1. Mobile Service</h2>
    <p>Service for device detection, breakpoints, and mobile utilities.</p>
    
    <h3>Features</h3>
    <ul class="feature-list">
      <li>Device type detection (mobile, tablet, desktop)</li>
      <li>Touch device detection</li>
      <li>Orientation tracking (portrait, landscape)</li>
      <li>Reactive breakpoint observables</li>
      <li>Safe area inset detection (iOS notches)</li>
      <li>Device vibration support</li>
      <li>PWA detection</li>
      <li>Viewport management</li>
    </ul>
    
    <h3>Usage</h3>
    <div class="code-block">
      <pre><code>// Import the service
import { MobileService } from '@app/shared/services/mobile.service';

@Component({...})
export class MyComponent {
  constructor(private mobileService: MobileService) {}
  
  ngOnInit() {
    // Synchronous checks
    if (this.mobileService.isMobile()) {
      console.log('Running on mobile device');
    }
    
    // Reactive breakpoint changes
    this.mobileService.isMobile$.subscribe(isMobile => {
      this.showMobileView = isMobile;
    });
    
    // Haptic feedback
    this.mobileService.vibrate(50);
    
    // Safe area insets
    const insets = this.mobileService.getSafeAreaInsets();
    console.log('Bottom inset:', insets.bottom);
  }
}</code></pre>
    </div>
  </div>
  
  <!-- Pull to Refresh -->
  <div class="feature-section">
    <h2>2. Pull-to-Refresh Directive</h2>
    <p>Add pull-to-refresh functionality to scrollable lists.</p>
    
    <h3>Features</h3>
    <ul class="feature-list">
      <li>Touch gesture detection</li>
      <li>Visual loading indicator</li>
      <li>Configurable threshold (default 80px)</li>
      <li>Haptic feedback on trigger</li>
      <li>Auto-hide after refresh</li>
      <li>Only active on touch devices</li>
    </ul>
    
    <h3>Usage</h3>
    <div class="code-block">
      <pre><code>// In your component TypeScript
import { PullToRefreshDirective } from '@app/shared/directives/pull-to-refresh.directive';

@Component({
  imports: [PullToRefreshDirective, ...]
})
export class PersonIndexComponent {
  isRefreshing = false;
  
  onRefresh(): void {
    this.isRefreshing = true;
    this.loadPersons().subscribe(() => {
      this.isRefreshing = false;
    });
  }
}

// In your template
&lt;div 
  appPullToRefresh 
  (refresh)="onRefresh()"
  [refreshThreshold]="100"
  [refreshEnabled]="!isRefreshing"
  class="person-list"&gt;
  &lt;!-- Your scrollable content --&gt;
&lt;/div&gt;</code></pre>
    </div>
  </div>
  
  <!-- Swipe Actions -->
  <div class="feature-section">
    <h2>3. Swipe Actions Directive</h2>
    <p>Add swipe-to-delete/archive functionality to list items.</p>
    
    <h3>Features</h3>
    <ul class="feature-list">
      <li>Left and right swipe actions</li>
      <li>Customizable action icons and colors</li>
      <li>Visual action indicators</li>
      <li>Haptic feedback</li>
      <li>Smooth animations</li>
      <li>Auto-reset on cancel</li>
    </ul>
    
    <h3>Usage</h3>
    <div class="code-block">
      <pre><code>// In your component
import { SwipeActionsDirective, SwipeEvent } from '@app/shared/directives/swipe-actions.directive';

@Component({
  imports: [SwipeActionsDirective, ...]
})
export class PersonListComponent {
  leftAction = { 
    icon: 'archive', 
    label: 'Archive', 
    color: '#2e7d32', 
    action: 'archive' 
  };
  
  rightAction = { 
    icon: 'delete', 
    label: 'Delete', 
    color: '#d32f2f', 
    action: 'delete' 
  };
  
  onSwipe(event: SwipeEvent, item: Person): void {
    if (event.action === 'delete') {
      this.deletePerson(item);
    } else if (event.action === 'archive') {
      this.archivePerson(item);
    }
  }
}

// In your template
&lt;div 
  *ngFor="let person of persons"
  appSwipeActions
  [leftAction]="leftAction"
  [rightAction]="rightAction"
  (swipe)="onSwipe($event, person)"
  class="person-item"&gt;
  {{ person.name }}
&lt;/div&gt;</code></pre>
    </div>
  </div>
  
  <!-- Mobile Action Sheet -->
  <div class="feature-section">
    <h2>4. Mobile Action Sheet (Bottom Sheet)</h2>
    <p>Display actions in a bottom sheet on mobile (alternative to dialogs).</p>
    
    <h3>Features</h3>
    <ul class="feature-list">
      <li>Touch-friendly action list</li>
      <li>Icon and label support</li>
      <li>Color-coded actions (primary, accent, warn)</li>
      <li>Disabled state support</li>
      <li>Divider between action groups</li>
      <li>Safe area inset support</li>
    </ul>
    
    <h3>Usage</h3>
    <div class="code-block">
      <pre><code>// In your component
import { MatBottomSheet } from '@angular/material/bottom-sheet';
import { MobileActionSheetComponent, ActionSheetData } from '@app/shared/components/mobile-action-sheet';

@Component({...})
export class PersonDetailsComponent {
  constructor(private bottomSheet: MatBottomSheet) {}
  
  showActions(): void {
    const data: ActionSheetData = {
      title: 'Person Actions',
      actions: [
        { icon: 'edit', label: 'Edit Person', value: 'edit', color: 'primary' },
        { icon: 'share', label: 'Share', value: 'share', color: 'accent' },
        { icon: 'print', label: 'Print Details', value: 'print' },
        { icon: 'delete', label: 'Delete Person', value: 'delete', color: 'warn', divider: true },
        { icon: 'archive', label: 'Archive', value: 'archive', disabled: true }
      ],
      cancelLabel: 'Cancel'
    };
    
    const sheetRef = this.bottomSheet.open(MobileActionSheetComponent, { data });
    
    sheetRef.afterDismissed().subscribe(action => {
      if (action) {
        this.handleAction(action);
      }
    });
  }
  
  handleAction(action: string): void {
    switch(action) {
      case 'edit': this.editPerson(); break;
      case 'share': this.sharePerson(); break;
      case 'delete': this.deletePerson(); break;
    }
  }
}</code></pre>
    </div>
  </div>
  
  <!-- Mobile Filter Sheet -->
  <div class="feature-section">
    <h2>5. Mobile Filter Sheet</h2>
    <p>Display filters in a bottom sheet on mobile (replaces sidebar filters).</p>
    
    <h3>Features</h3>
    <ul class="feature-list">
      <li>Multiple filter types (checkbox, select, text, date, range)</li>
      <li>Active filter chips with remove</li>
      <li>Clear all filters button</li>
      <li>Apply and reset actions</li>
      <li>Scrollable filter list</li>
      <li>Safe area inset support</li>
    </ul>
    
    <h3>Usage</h3>
    <div class="code-block">
      <pre><code>// In your component
import { MatBottomSheet } from '@angular/material/bottom-sheet';
import { MobileFilterSheetComponent, FilterSheetData } from '@app/shared/components/mobile-filter-sheet';

@Component({...})
export class PersonIndexComponent {
  currentFilters: any = {};
  
  constructor(private bottomSheet: MatBottomSheet) {}
  
  showFilters(): void {
    const data: FilterSheetData = {
      title: 'Filter Persons',
      filters: [
        { 
          id: 'household', 
          label: 'Household', 
          type: 'select',
          options: [
            { value: 1, label: 'Smith Family' },
            { value: 2, label: 'Johnson Family' }
          ]
        },
        { 
          id: 'deceased', 
          label: 'Show deceased only', 
          type: 'checkbox' 
        },
        { 
          id: 'search', 
          label: 'Search by name', 
          type: 'text',
          placeholder: 'Enter name...'
        },
        {
          id: 'birthDate',
          label: 'Birth date',
          type: 'date'
        }
      ],
      activeFilters: this.currentFilters
    };
    
    const sheetRef = this.bottomSheet.open(MobileFilterSheetComponent, { data });
    
    sheetRef.afterDismissed().subscribe(filters => {
      if (filters) {
        this.currentFilters = filters;
        this.applyFilters(filters);
      }
    });
  }
  
  applyFilters(filters: any): void {
    // Apply filters to your data
    this.filterPersons(filters);
  }
}</code></pre>
    </div>
  </div>
  
  <!-- Mobile SCSS Utilities -->
  <div class="feature-section">
    <h2>6. Mobile SCSS Utilities</h2>
    <p>Pre-built SCSS mixins and utility classes for mobile-first development.</p>
    
    <h3>Touch-Friendly Button Sizes</h3>
    <div class="mobile-screen">
      <div style="text-align: center;">
        <p style="margin: 0 0 12px 0; color: #666;">WCAG 2.1 AA Compliant (44x44px minimum)</p>
        <span class="touch-target">‚úì</span>
        <span class="touch-target">‚úèÔ∏è</span>
        <span class="touch-target">üóëÔ∏è</span>
      </div>
    </div>
    
    <h3>Available Mixins</h3>
    <div class="code-block">
      <pre><code>// Mobile breakpoints
@include mobile-only { ... }
@include tablet-and-up { ... }
@include mobile-landscape { ... }

// Touch targets
@include touch-target;

// Responsive fonts
@include responsive-font(18px, 16px);

// Mobile padding
@include mobile-padding;

// Full width on mobile
@include mobile-full-width;</code></pre>
    </div>
    
    <h3>Utility Classes</h3>
    <div class="code-block">
      <pre><code>&lt;!-- Visibility --&gt;
&lt;div class="hide-mobile"&gt;Hidden on mobile&lt;/div&gt;
&lt;div class="show-mobile"&gt;Shown only on mobile&lt;/div&gt;

&lt;!-- Touch friendly --&gt;
&lt;button class="btn-touch"&gt;Touch-friendly button&lt;/button&gt;

&lt;!-- Mobile card --&gt;
&lt;mat-card class="mobile-card"&gt;Full width on mobile&lt;/mat-card&gt;

&lt;!-- Safe area --&gt;
&lt;div class="safe-area-bottom"&gt;Respects iOS notch&lt;/div&gt;

&lt;!-- Touch feedback --&gt;
&lt;div class="touch-feedback"&gt;Visual feedback on tap&lt;/div&gt;

&lt;!-- No select (for buttons/icons) --&gt;
&lt;div class="no-select"&gt;No text selection&lt;/div&gt;

&lt;!-- Responsive grid --&gt;
&lt;div class="mobile-grid"&gt;
  &lt;div&gt;1 column on mobile, 2-4 on larger screens&lt;/div&gt;
&lt;/div&gt;</code></pre>
    </div>
  </div>
  
  <!-- Mobile-Desktop Pattern -->
  <div class="feature-section">
    <h2>7. Mobile vs Desktop Pattern</h2>
    <p>Recommended pattern for showing different UI on mobile vs desktop.</p>
    
    <div class="code-block">
      <pre><code>// In your component
export class MyComponent {
  isMobile$ = this.mobileService.isMobile$;
  
  constructor(private mobileService: MobileService) {}
  
  showActions(): void {
    // Use different UI based on device
    if (this.mobileService.isMobile()) {
      // Show bottom sheet on mobile
      this.bottomSheet.open(MobileActionSheetComponent, { data });
    } else {
      // Show dialog on desktop
      this.dialog.open(ActionDialogComponent, { data });
    }
  }
}

// In your template
&lt;!-- Show different components based on device --&gt;
&lt;app-mobile-view *ngIf="isMobile$ | async"&gt;&lt;/app-mobile-view&gt;
&lt;app-desktop-view *ngIf="!(isMobile$ | async)"&gt;&lt;/app-desktop-view&gt;

&lt;!-- Or use CSS classes --&gt;
&lt;div class="hide-mobile"&gt;Desktop content&lt;/div&gt;
&lt;div class="show-mobile"&gt;Mobile content&lt;/div&gt;</code></pre>
    </div>
  </div>
  
  <!-- Best Practices -->
  <div class="feature-section">
    <h2>üìã Mobile Development Best Practices</h2>
    
    <h3>Touch Targets</h3>
    <ul class="feature-list">
      <li>Minimum size: 44x44px (WCAG 2.1 AA)</li>
      <li>Spacing: 8px between interactive elements</li>
      <li>Use <code>btn-touch</code> class or <code>@include touch-target</code></li>
    </ul>
    
    <h3>Bottom Sheets vs Dialogs</h3>
    <ul class="feature-list">
      <li>Mobile: Use bottom sheets (easier to reach, native feel)</li>
      <li>Desktop: Use dialogs (better for large screens)</li>
      <li>Always check device type before showing</li>
    </ul>
    
    <h3>Performance</h3>
    <ul class="feature-list">
      <li>Lazy load images (<code>loading="lazy"</code>)</li>
      <li>Use virtual scrolling for lists > 100 items</li>
      <li>Debounce input (300ms for search/filter)</li>
      <li>Use <code>trackBy</code> in <code>*ngFor</code></li>
      <li>OnPush change detection where applicable</li>
    </ul>
    
    <h3>Safe Area Insets</h3>
    <ul class="feature-list">
      <li>Always account for iOS notches and home indicators</li>
      <li>Use <code>padding-bottom: env(safe-area-inset-bottom)</code></li>
      <li>Apply utility classes: <code>safe-area-bottom</code></li>
    </ul>
  </div>
  
  <!-- Testing Checklist -->
  <div class="feature-section">
    <h2>‚úÖ Mobile Testing Checklist</h2>
    <ul class="feature-list">
      <li>Test on real mobile devices (iOS and Android)</li>
      <li>Test in mobile browsers (Chrome, Safari)</li>
      <li>Test portrait and landscape orientations</li>
      <li>Test with keyboard visible</li>
      <li>Verify touch targets are 44x44px minimum</li>
      <li>Test swipe gestures</li>
      <li>Test pull-to-refresh</li>
      <li>Test bottom sheets</li>
      <li>Test safe area insets on notched devices</li>
      <li>Test performance (load time, scroll)</li>
      <li>Test accessibility with screen readers</li>
    </ul>
  </div>
  
  <!-- Resources -->
  <div class="feature-section">
    <h2>üìö Resources</h2>
    <ul>
      <li><strong>Implementation Summary:</strong> <code>/docs/Phase_9.1_Implementation_Summary.md</code></li>
      <li><strong>UI Design Plan:</strong> <code>/docs/UI_DesignPlan.md</code> (Phase 9.1 marked complete)</li>
      <li><strong>Mobile Service:</strong> <code>/src/app/shared/services/mobile.service.ts</code></li>
      <li><strong>Pull-to-Refresh:</strong> <code>/src/app/shared/directives/pull-to-refresh.directive.ts</code></li>
      <li><strong>Swipe Actions:</strong> <code>/src/app/shared/directives/swipe-actions.directive.ts</code></li>
      <li><strong>Action Sheet:</strong> <code>/src/app/shared/components/mobile-action-sheet/</code></li>
      <li><strong>Filter Sheet:</strong> <code>/src/app/shared/components/mobile-filter-sheet/</code></li>
      <li><strong>Mobile SCSS:</strong> <code>/src/styles/_mobile.scss</code></li>
    </ul>
  </div>
  
  <div class="warning">
    <strong>‚ö†Ô∏è Next Steps:</strong> Phase 9.2 will focus on Progressive Web App (PWA) features including service workers, offline support, add to home screen, and push notifications.
  </div>
  
  <div class="success">
    <strong>üéâ Congratulations!</strong> Phase 9.1 is complete! All mobile-first components are ready to use throughout the RushtonRoots application.
  </div>
</body>
</html>
